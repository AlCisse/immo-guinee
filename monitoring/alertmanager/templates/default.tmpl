{{ define "slack.default.title" -}}
[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .CommonLabels.alertname }}
{{- end }}

{{ define "slack.default.text" -}}
{{ range .Alerts }}
*Alert:* {{ .Annotations.summary }}
*Severity:* {{ .Labels.severity }}
*Description:* {{ .Annotations.description }}
*Started:* {{ .StartsAt.Format "2006-01-02 15:04:05" }}
{{ if .EndsAt }}*Ended:* {{ .EndsAt.Format "2006-01-02 15:04:05" }}{{ end }}
---
{{ end }}
{{- end }}

{{ define "email.default.subject" -}}
[{{ .Status | toUpper }}] ImmoGuinee: {{ .CommonLabels.alertname }}
{{- end }}

{{ define "email.default.html" -}}
<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .alert { padding: 15px; margin: 10px 0; border-radius: 5px; }
    .critical { background-color: #f8d7da; border: 1px solid #f5c6cb; }
    .warning { background-color: #fff3cd; border: 1px solid #ffeeba; }
    .resolved { background-color: #d4edda; border: 1px solid #c3e6cb; }
    h2 { color: #333; }
    .label { font-weight: bold; }
  </style>
</head>
<body>
  <h2>ImmoGuinee Alert Notification</h2>
  <p>Status: <strong>{{ .Status | toUpper }}</strong></p>

  {{ range .Alerts }}
  <div class="alert {{ .Labels.severity }}">
    <h3>{{ .Labels.alertname }}</h3>
    <p><span class="label">Summary:</span> {{ .Annotations.summary }}</p>
    <p><span class="label">Description:</span> {{ .Annotations.description }}</p>
    <p><span class="label">Severity:</span> {{ .Labels.severity }}</p>
    <p><span class="label">Started:</span> {{ .StartsAt.Format "2006-01-02 15:04:05 UTC" }}</p>
    {{ if .EndsAt }}<p><span class="label">Ended:</span> {{ .EndsAt.Format "2006-01-02 15:04:05 UTC" }}</p>{{ end }}
  </div>
  {{ end }}

  <hr>
  <p style="color: #666; font-size: 12px;">
    This alert was generated by ImmoGuinee Monitoring System.<br>
    View dashboards at: <a href="https://monitoring.immoguinee.com">monitoring.immoguinee.com</a>
  </p>
</body>
</html>
{{- end }}

{{ define "webhook.default.message" -}}
{
  "status": "{{ .Status }}",
  "alerts": [
    {{ range $i, $alert := .Alerts }}{{ if $i }},{{ end }}
    {
      "alertname": "{{ $alert.Labels.alertname }}",
      "severity": "{{ $alert.Labels.severity }}",
      "summary": "{{ $alert.Annotations.summary }}",
      "description": "{{ $alert.Annotations.description }}",
      "startsAt": "{{ $alert.StartsAt.Format "2006-01-02T15:04:05Z07:00" }}",
      "status": "{{ $alert.Status }}"
    }
    {{ end }}
  ],
  "commonLabels": {
    "alertname": "{{ .CommonLabels.alertname }}",
    "severity": "{{ .CommonLabels.severity }}"
  },
  "externalURL": "{{ .ExternalURL }}"
}
{{- end }}

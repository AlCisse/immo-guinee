# ============================================
# DOCKER SWARM DEPLOYMENT - ImmoGuinée
# ============================================

# ============================================
# APPLICATION & DOMAIN
# ============================================
APP_NAME=ImmoGuinée
APP_ENV=production
APP_DEBUG=false
APP_URL=https://immog.gn

# Domain Configuration for Swarm
DOMAIN=immog.gn
ACME_EMAIL=admin@immog.gn

# ============================================
# DATABASE (PostgreSQL 15+ with PostGIS)
# ============================================
DB_CONNECTION=pgsql
DB_HOST=postgres
DB_PORT=5432
DB_DATABASE=immog_db
DB_USERNAME=immog_user
DB_PASSWORD=REDACTED_DB_PASSWORD

# ============================================
# REDIS 7+ (Cache, Sessions, Queues, Broadcasting)
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=immog_redis_secret
REDIS_CLIENT=phpredis
REDIS_DB=0

# Cache Configuration
CACHE_DRIVER=redis
CACHE_PREFIX=immog_cache

# Session Configuration
SESSION_DRIVER=redis
SESSION_LIFETIME=120

# Queue Configuration
QUEUE_CONNECTION=redis

# Broadcasting Configuration
BROADCAST_DRIVER=redis

# ============================================
# ELASTICSEARCH (Search Engine)
# ============================================
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200
SCOUT_DRIVER=elasticsearch
SCOUT_PREFIX=immog_

# ============================================
# VARNISH (HTTP Cache)
# ============================================
VARNISH_HOST=varnish
VARNISH_PORT=80

# ============================================
# STORAGE (MinIO S3-Compatible)
# ============================================
FILESYSTEM_DRIVER=s3
AWS_ACCESS_KEY_ID=immog_minio
AWS_SECRET_ACCESS_KEY=immog_minio_secret
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=immog-uploads
AWS_ENDPOINT=http://minio:9000
AWS_USE_PATH_STYLE_ENDPOINT=true

MINIO_ROOT_USER=immog_minio
MINIO_ROOT_PASSWORD=immog_minio_secret
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# ============================================
# LARAVEL PASSPORT (OAuth2 Authentication)
# ============================================
PASSPORT_PERSONAL_ACCESS_CLIENT_ID=
PASSPORT_PERSONAL_ACCESS_CLIENT_SECRET=
PASSPORT_PRIVATE_KEY=
PASSPORT_PUBLIC_KEY=

# ============================================
# LARAVEL ECHO (Real-time Broadcasting)
# ============================================
LARAVEL_ECHO_SERVER_AUTH_HOST=nginx
LARAVEL_ECHO_SERVER_AUTH_ENDPOINT=/broadcasting/auth
LARAVEL_ECHO_HOST=laravel-echo
LARAVEL_ECHO_PORT=6001
LARAVEL_ECHO_PROTOCOL=http

MIX_LARAVEL_ECHO_HOST=${LARAVEL_ECHO_HOST}
MIX_LARAVEL_ECHO_PORT=${LARAVEL_ECHO_PORT}

# ============================================
# MESSAGING APIs
# ============================================
# Twilio (SMS - Canal 3)
TWILIO_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FROM_NUMBER=

# WAHA (WhatsApp - Canal 2)
WAHA_HOST=waha
WAHA_PORT=3000
WAHA_API_KEY=
WHATSAPP_HOOK_URL=http://nginx/api/webhooks/whatsapp

# Telegram Bot (Canal 4)
TELEGRAM_BOT_TOKEN=
TELEGRAM_WEBHOOK_URL=https://${DOMAIN}/api/webhooks/telegram

# ============================================
# MOBILE MONEY APIs (Guinea)
# ============================================
# Orange Money
ORANGE_MONEY_BASE_URL=
ORANGE_MONEY_MERCHANT_CODE=
ORANGE_MONEY_API_KEY=
ORANGE_MONEY_API_SECRET=

# MTN Mobile Money
MTN_MOMO_BASE_URL=
MTN_MOMO_API_USER=
MTN_MOMO_API_KEY=
MTN_MOMO_SUBSCRIPTION_KEY=

# ============================================
# GEOCODING & MAPS
# ============================================
GEOCODER_PROVIDER=openstreet
GEOCODER_API_KEY=
GEOCODER_LOCALE=fr_GN

# ============================================
# IMAGE OPTIMIZATION
# ============================================
IMAGE_DRIVER=gd
IMAGEOPTIM_API_KEY=

# ============================================
# WORKFLOW AUTOMATION (n8n)
# ============================================
N8N_USER=admin
N8N_PASSWORD=immog_n8n_secret
N8N_HOST=n8n.${DOMAIN}
N8N_PORT=5678
N8N_PROTOCOL=https

# ============================================
# MONITORING
# ============================================
# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_USER=admin
GRAFANA_PASSWORD=immog_grafana_secret
GRAFANA_PORT=3001

# Sentry (Error Tracking)
SENTRY_LARAVEL_DSN=
SENTRY_TRACES_SAMPLE_RATE=1.0

# Logrocket (Session Replay)
LOGROCKET_APP_ID=

# Laravel Telescope (Local Development)
TELESCOPE_ENABLED=false

# ============================================
# DATABASE MANAGEMENT
# ============================================
# PgAdmin
PGADMIN_EMAIL=admin@immog.gn
PGADMIN_PASSWORD=immog_pgadmin_secret
PGADMIN_PORT=5050

# ============================================
# REVERSE PROXY (Traefik)
# ============================================
TRAEFIK_DASHBOARD_PORT=8081

# ============================================
# SERVICE PORTS
# ============================================
# Nginx
NGINX_PORT=80

# Database
DB_EXTERNAL_PORT=5432

# Redis
REDIS_EXTERNAL_PORT=6379

# Elasticsearch
ELASTICSEARCH_EXTERNAL_PORT=9200

# MinIO
MINIO_EXTERNAL_PORT=9000
MINIO_CONSOLE_EXTERNAL_PORT=9001

# n8n
N8N_EXTERNAL_PORT=5678

# WAHA
WAHA_EXTERNAL_PORT=3000

# Laravel Echo
LARAVEL_ECHO_EXTERNAL_PORT=6001

# Monitoring
PROMETHEUS_EXTERNAL_PORT=9090
GRAFANA_EXTERNAL_PORT=3001
PGADMIN_EXTERNAL_PORT=5050

# ============================================
# MAIL (Laravel Notifications - Email Canal 1)
# ============================================
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@immog.gn
MAIL_FROM_NAME="${APP_NAME}"

# ============================================
# SECURITY
# ============================================
APP_KEY=base64:your-generated-app-key-here

# Two-Factor Authentication
TWO_FACTOR_ENABLED=true
TWO_FACTOR_EXPIRE=300

# Rate Limiting (Laravel Brute-force Protection)
RATE_LIMIT_PUBLIC=100
RATE_LIMIT_AUTHENTICATED=60
RATE_LIMIT_PAYMENT=10

# CORS Configuration
CORS_ALLOWED_ORIGINS=https://${DOMAIN},https://www.${DOMAIN}

# ============================================
# BUSINESS LOGIC
# ============================================
# Commission Rates (FR-045)
COMMISSION_DEFAULT=50
COMMISSION_SILVER=50
COMMISSION_GOLD=40
COMMISSION_DIAMOND=30

# Certification Thresholds (FR-053)
BADGE_SILVER_TRANSACTIONS=1
BADGE_GOLD_TRANSACTIONS=5
BADGE_GOLD_MIN_RATING=4.0
BADGE_DIAMOND_TRANSACTIONS=20
BADGE_DIAMOND_MIN_RATING=4.5

# Contract Retention (FR-032)
CONTRACT_RETENTION_YEARS=10

# Listing Auto-Renewal (FR-013)
LISTING_DURATION_DAYS=30

# Search Performance (FR-094)
SEARCH_TIMEOUT_MS=500

# ============================================
# LOGGING
# ============================================
LOG_CHANNEL=stderr
LOG_LEVEL=info
LOG_STDERR_FORMATTER=Monolog\\Formatter\\JsonFormatter

# ============================================
# FRONTEND (Next.js)
# ============================================
# Production
NEXT_PUBLIC_API_URL=https://${DOMAIN}/api
NEXT_PUBLIC_APP_URL=https://${DOMAIN}
NEXT_PUBLIC_ECHO_HOST=${DOMAIN}
NEXT_PUBLIC_ECHO_PORT=443
NEXT_PUBLIC_ECHO_PROTOCOL=https
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=

# Development
FRONTEND_PORT=3000
FRONTEND_URL=http://localhost:3000

# ============================================
# ROLE-BASED DASHBOARD URLS
# ============================================
# Dashboard paths for each role (appended to FRONTEND_URL)
DASHBOARD_ADMIN_PATH=/dashboard
DASHBOARD_MEDIATOR_PATH=/dashboard/mediator
DASHBOARD_AGENT_PATH=/dashboard/agent
DASHBOARD_USER_PATH=/
DASHBOARD_DEFAULT_PATH=/

# ============================================
# DOCKER SWARM SPECIFIC
# ============================================
# Swarm Service Names
SERVICE_PREFIX=immog
STACK_NAME=immog

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=30s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_INTERVAL=10s